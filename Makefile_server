COMPFILE := docker/compose_prod.yml
COMP := compose -f $(COMPFILE)
EXEC := $(COMP) exec web
SERVER := htwserver-webapi
APPDIR := ~/api
SERVER_APP := $(SERVER):$(APPDIR)
RSYNC_COMMON := -rcv --exclude-from=.rsyncexclude

up:
	docker $(COMP) up -d

logs:
	docker $(COMP) logs -f

down:
	docker $(COMP) down

restart_web:
	docker $(COMP) restart web

build:
	docker $(COMP) build

create:
	docker $(COMP) create

enter:
	docker $(EXEC) /bin/bash

migrate:
	docker $(EXEC) python manage.py migrate

check:
	docker $(EXEC) python manage.py check --deploy

test:
	docker $(EXEC) python manage.py test api
